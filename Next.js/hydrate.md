## Hydration

Server Side에서 렌더링된 정적 페이지와 번들링된 JS 파일을 클라이언트에게 보낸 뒤, Client Side에서 HTML코드와 React인 JS 코드를 서로 매칭시키는 과정이다.

Next.js는 클라이언트에게 웹 페이지를 보내기 전에 Server Side에서 미리 웹 페이지를 Pre-Rendering한다. 그리고 Pre-Rendering으로 인해 생성된 HTML 문서를 클라이언트에게 전송한다.

클라이언트에서 처음 HTML 문서를 전송받은 시점에는 JS가 아직 로드되지 않은 상황이다. 즉, 사용자는 화면을 볼 수는 있지만 상호작용을 할 수는 없다. 이러한 이유로 인해 SSR 의 경우 TTV 와 TTI 의 차이가 존재한다.

어떻게 상호작용이 불가능한 웹 페이지가 정상적으로 동작하게 되는 걸까?

Next.js Server는 Pre-Rendering된 웹 페이지를 전송한 후, 리액트가 번들링된 JS 코드를 클라이언트에게 전송하기 때문이다.

처음에 Document 유형의 코드를 전송하고, 이후에 JS 파일들이 Chunk 단위로 다운로드된다. 그리고 이 코드들이 이전에 보내진 HTML 파일의 DOM 요소 위에서 다시 렌더링되며, 각자 본인의 자리를 찾아가며 매칭이 된다. 이 과정을 Hydrate 라고 부른다. JS 코드들이 DOM 요소 위에 물을 채우 듯 필요로 하던 요소들을 채운다고 하여 Hydrate(수화)라는 용어를 사용한다.
